"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("react")),r=require("@sanity/form-builder/PatchEvent"),n=e(r),i=e(require("config:bynder-input")),a=e(require("part:@sanity/components/buttons/button-grid")),o=e(require("part:@sanity/components/buttons/default")),l=e(require("part:@sanity/components/fieldsets/default")),s=e(require("video.js")),p=require("@sanity/field/diff");function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var r,n;function i(){return e.apply(this,arguments)||this}n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,d(r,n);var a=i.prototype;return a.componentDidMount=function(){this.player=s(this.videoNode,this.props)},a.componentWillUnmount=function(){this.player&&this.player.dispose()},a.render=function(){var e=this;return t.createElement("div",null,t.createElement("link",{href:"https://vjs.zencdn.net/7.8.4/video-js.css",rel:"stylesheet"}),t.createElement("div",{"data-vjs-player":!0,style:{marginBottom:"16px"}},t.createElement("video",{className:"video-js vjs-16-9 vjs-big-play-centered",ref:function(t){t&&(e.videoNode=t)}})))},i}(t.Component);function m(e){var r=e.value;return r&&r.previewUrl?t.createElement("div",null,t.createElement("img",{alt:"preview",src:r.previewUrl,style:{width:"100%"}})):t.createElement("div",{className:'@import "part:@sanity/base/theme/variables-style";.root{display:flex;flex-direction:column;height:100%}.header{flex:1;min-height:0;padding:var(--small-padding) var(--small-padding) 0}.imageWrapper{background-color:color(var(--gray-lightest) alpha(50%));background-image:linear-gradient(45deg,var(--checkerboard-color) 25%,transparent 25%),linear-gradient(-45deg,var(--checkerboard-color) 25%,transparent 25%),linear-gradient(45deg,transparent 75%,var(--checkerboard-color) 75%),linear-gradient(-45deg,transparent 75%,var(--checkerboard-color) 75%);background-position:0 0,0 8px,8px -8px,-8px 0;background-size:16px 16px;display:flex;flex-direction:column;height:100%;max-height:190px;position:relative;&:after{bottom:0;box-shadow:inset 0 0 0 1px var(--hairline-color);content:"";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}}.image{display:block;flex:1;height:100%;min-height:0;-o-object-fit:contain;object-fit:contain;width:100%;@nest &[data-action="removed"]{opacity:.5}}.error{composes:image;margin:50px 0;text-align:center}.hotspotCrop{display:block;height:100%;left:0;position:absolute;top:0;width:100%}.imageWrapperChanged{composes:imageWrapper;opacity:.45}.strikethrough{text-decoration:line-through}.noImage{composes:small from "part:@sanity/base/theme/typography/text-blocks-style";align-items:center;background:var(--gray-lightest);border-radius:var(--border-radius-small);color:var(--gray-dark);display:flex;height:100%;justify-content:center;width:100%}'.noImage},t.createElement("div",null,"(no image)"))}exports.default={name:"bynder.asset",type:"object",title:"Bynder Asset",fields:[{type:"string",name:"id"},{type:"string",name:"name"},{type:"string",name:"databaseId"},{type:"string",name:"type"},{type:"string",name:"previewUrl"},{type:"string",name:"previewImg"},{type:"string",name:"datUrl"},{type:"string",name:"description"},{type:"number",name:"aspectRatio"},{type:"string",name:"videoUrl"}],inputComponent:function(e){var s,p=function(e){switch(e.type){case"VIDEO":return e.previewUrls[0];default:return e.files.webImage.url}},d=function(e){var t,r,n;return"VIDEO"===e.type?null!=(t=null==(r=e.files)||null==(n=r.original)?void 0:n.url)?t:e.previewUrls[0]:null},m=e.value,u=e.type,g=e.markers,y=e.level,f=e.readOnly;return m&&("VIDEO"===m.type&&(s=t.createElement(c,{controls:!0,poster:m.previewImg,sources:[{src:m.previewUrl}]})),"IMAGE"===m.type&&(s=t.createElement("img",{alt:"preview",src:m.previewUrl,style:{maxWidth:"100%",height:"auto"}}))),t.createElement(l,{markers:g,legend:u.title,description:u.description,level:y},t.createElement("div",{style:{textAlign:"center"}},s),t.createElement(a,{align:"start"},t.createElement(o,{disabled:f,inverted:!0,title:"Select an asset",kind:"default",onClick:function(){var t=e.onChange,a=e.type,o=e.value,l={language:i.language||"en_US",defaultDomain:i.portalDomain,theme:{colorPrimary:"#156dff",colorButtonPrimary:"#156dff"},mode:"SingleSelectFile",onSuccess:function(e){var i,l,s=e[0],c=s.files.webImage,m=(l={width:c.width,height:c.height}).height/l.width;t(n.from([r.set({_key:null==o?void 0:o._key,_type:a.name,id:s.id,name:s.name,databaseId:s.databaseId,type:s.type,previewUrl:p(s),previewImg:c.url,datUrl:null==(i=s.files.transformBaseUrl)?void 0:i.url,videoUrl:d(s),description:s.description,aspectRatio:m})]))}},s=a.options.assetTypes;s&&(l.assetTypes=s),function(e){var t=document.getElementById("bynder");if(!t){var r=document.createElement("script");r.src="https://d8ejoa1fys2rk.cloudfront.net/5.0.5/modules/compactview/bynder-compactview-2-latest.js",r.id="bynder",document.body.appendChild(r),r.onload=function(){return!e||e()}}!t||!e||e()}((function(){window.BynderCompactView.open(l)}))}},"Browse"),t.createElement(o,{disabled:f||!m,color:"danger",inverted:!0,title:"Remove asset",onClick:function(){(0,e.onChange)(n.from([r.unset()]))}},"Remove")))},diffComponent:function(e){return t.createElement(p.DiffFromTo,{diff:e.diff,schemaType:e.schemaType,previewComponent:m})}};
//# sourceMappingURL=sanity-plugin-bynder-input.cjs.production.min.js.map
